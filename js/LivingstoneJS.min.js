(function(){function g(a,b){a=this.J="string"==typeof a?document.getElementById(a):a;b=this.options="object"==typeof b?b:{};L(a);var c=this.f=r("canvas",null,{"class":"LivingstoneJS-container",width:b.canvas_x_resolution||a.offsetWidth,height:b.canvas_y_resolution||a.offsetHeight}),d=this.W=r("div",null,{"class":"LivingstoneJS-attribution"});a.appendChild(this.i=r("div",[c,d],{"class":"LivingstoneJS-style"},{position:"relative",overflow:"hidden",height:"100%",width:"100%"}));this.listeners={click:[],
dblclick:[],map_loaded:[],map_type_changed:[],viewport_changed:[],zoom_changed:[],map_render:[],overlay_added:[],overlay_removed:[],drag_start:[],drag_end:[],mousemove:[],drag:[],resize:[],touch_start:[],touch_end:[],mousewheel:[]};this.resize();b.no_zoom_control||setTimeout(p(this,function(){new C({map:this})}),0);this.Z();b.map_type&&this.setMapType(b.map_type);b.viewport&&this.setViewport(b.viewport);n.b.apply(this,["map_loaded"])}function m(a,b,c){this.x=a;this.y=b;this.z=c}function t(a){var b=
r("a",null,{"class":"LivingstoneJS-attribution",href:"http://www.openstreetmap.org/copyright"});b.innerHTML="&copy; OpenStreetMap contributors";this.options={max_zoom:19,min_zoom:0,attribution:b,earth_radius:6378137};this.setOptions(a);this.options.attribution&&!this.options.attribution.nodeType&&(this.options.attribution=document.createTextNode(this.options.attribution))}function J(){}function y(){}function A(a){this.setOptions(a);this.listeners={click:[],mouseover:[],mouseout:[]}}function x(a){this.setOptions(a);
this.listeners={click:[],mouseover:[],mouseout:[]};this.options.position||(this.options.position=[[]]);this.options.position[0]instanceof q&&(this.options.position[0]=this.options.position);a=this.bounds=new z;for(var b=this.options.position[0],c=0;c<b.length;c++)a.extend(b[c]);this.options.map&&this.options.position&&0<this.options.position.length&&this.options.map.c()}function D(a){this.setOptions(a);this.listeners={click:[],mouseover:[],mouseout:[]};this.options.position||(this.options.position=
[[]]);this.options.position[0]instanceof q&&(this.options.position[0]=this.options.position);a=this.bounds=new z;for(var b=this.options.position[0],c=0;c<b.length;c++)a.extend(b[c]);this.options.map&&this.options.position&&0<this.options.position.length&&this.options.map.c()}function v(a){this.container=r("div",[r("div",[r("div",[document.createTextNode("x")],{"class":"LivingstoneJS-infowindow-close",onclick:p(this,function(a){a.stopPropagation&&a.stopPropagation();v.prototype.close.apply(this,[])})})],
{"class":"LivingstoneJS-infowindow-controls"}),this.K=r("div",null,{"class":"LivingstoneJS-infowindow-content"}),r("div",null,{"class":"LivingstoneJS-infowindow-base"})],{"class":"LivingstoneJS-infowindow"});this.setOptions(a)}function z(){for(var a=0;a<arguments.length;a++)this.extend(arguments[a])}function q(a,b){this.lat=a;this.lng=b}function C(a){a=this.options=a||{};var b=this.J=r("div",[this.A=r("div",[document.createTextNode("+")],{"class":"LivingstoneJS-zoomcontrol-in LivingstoneJS-zoomcontrol-inactive",
onclick:p(this,C.prototype.na)}),this.B=r("div",[document.createTextNode("-")],{"class":"LivingstoneJS-zoomcontrol-out LivingstoneJS-zoomcontrol-inactive",onclick:p(this,C.prototype.oa)})],{"class":"LivingstoneJS-zoomcontrol"});this.I();(a.container||a.map.i).appendChild(b);n.addEvent(this.options.map,"viewport_changed",p(this,C.prototype.I))}function B(){var a=B.geocoders;this.index=a.length;a.push(this)}function E(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c}function r(a,b,c,d){a=
document.createElement(a);for(var e=0;b&&e<b.length;e++)a.appendChild(b[e]);if(c)for(e in b=/^on/,c)e.match(b)?w(e.replace(b,""),c[e],a):a.setAttribute(e,c[e]);if(d)for(e in d)a.style[e]=d[e];return a}function p(a,b,c){return function(){for(var d=[],e=0;c&&e<c.length;e++)d.push(c[e]);for(e=0;e<arguments.length;e++)d.push(arguments[e]);return b.apply(a,d)}}function L(a){for(;a&&a.firstChild;)a.removeChild(a.firstChild)}function u(a,b){window._osm||(window._osm={});window._osm[a]=b}var G=Math.PI/180,
M=180/Math.PI;u("Map",g);g.prototype.Z=function(){var a=this.f,b=null;a&&a.getContext&&(b||(b=a.getContext("2d")));this.context=b;var b=p(this,g.prototype.ia),c=p(this,g.prototype.X),d=p(this,g.prototype.ka);touchend_listener=p(this,g.prototype.N);mousewheel_listener=p(this,g.prototype.aa);w("mousedown",b,a);w("touchstart",d,a);w("mouseup",c);w("touchend",touchend_listener,window);w("touchleave",c,a);w("touchcancel",c,window);w("click",p(this,g.prototype.click),a);w("dblclick",p(this,g.prototype.L),
a);w("mousemove",p(this,g.prototype.H),a);w("mousewheel",mousewheel_listener,a);w("DOMMouseScroll",mousewheel_listener,a)};g.prototype.setMapType=function(a){for(var b=this.W;b.firstChild;)b.removeChild(b.firstChild);if(Array.isArray(a)){this.a=[];for(var c=0;c<a.length;c++){var d=a[c];this.a.push(d);d.options.attribution&&b.appendChild(d.options.attribution.cloneNode(1))}}else this.a=[a],a.options.attribution&&b.appendChild(a.options.attribution.cloneNode(1));this.c();n.b.apply(this,["map_type_change"])};
g.prototype.setViewport=function(a){var b=this.viewport=this.viewport||{},c=this.options,d=c.max_zoom||19,e=c.min_zoom||0,f=this.f,c=b.zoom,l=this.a[0],h;for(h in a)"zoom"==h&&(a[h]=Math.max(a[h],e),a[h]=Math.min(a[h],d)),b[h]=a[h];a.bounds?this.fitBounds(a.bounds):(a=l.fromLatLngToPoint(b.center,this.getZoom()),d=f.width/2,h=f.height/2,f=l.fromPointToLatLng(new m(a.x-d,a.y-h),this.getZoom()),l=l.fromPointToLatLng(new m(a.x+d,a.y+h),this.getZoom()),b.bounds=new z(f,l));this.c();n.b.apply(this,["viewport_changed"]);
c!=b.zoom&&n.b.apply(this,["zoom_changed"])};g.prototype.getViewport=function(){return this.viewport};g.prototype.fitBounds=function(a){for(var b=this.f,c=this.a[0],d=b.height,b=b.width,e=c.options.max_zoom;e>c.options.min_zoom;e--){var f=c.fromLatLngToPoint(a.ne,e),l=c.fromLatLngToPoint(a.sw,e),h=Math.abs(f.y-l.y),f=Math.abs(f.x-l.x);if(e-1<=c.options.min_zoom||h<=d&&f<=b){this.setViewport({center:a.getCenter(),zoom:e});break}}};g.prototype.O=function(){var a=this.f;return new m(Math.round(a.width/
2)+this.offsetLeft,Math.round(a.height/2)+this.offsetTop)};g.prototype.c=function(){var a=0,b=0,c=this.a&&this.a[0]?this.a[0]:null,d=this.viewport,e=this.f,f=this.context;f&&f.clearRect(0,0,e.width,e.height);if(d&&c){d.center&&"number"==typeof d.zoom?(b=d.center instanceof m?d.center:c.fromLatLngToPoint(d.center,this.getZoom()),a=this.offsetLeft=b.x-Math.round(e.width/2),b=this.offsetTop=b.y-Math.round(e.height/2)):d.bounds&&this.fitBounds(d.bounds);c=[this.s,this.o,this.h];for(d=0;d<c.length;d++)for(var f=
c[d],l=0;f&&l<f.length;l++)f[l].u();for(d=this.a.length-1;0<=d;d--)for(var c=this.a[d],f=c.options.width||256,l=c.options.height||256,h=Math.floor(a/f);h*f<e.width+a;){for(var k=Math.floor(b/l);k*l<b+e.height;)c.S(h,k,this.viewport.zoom||0,this),k++;h++}n.b.apply(this,["map_render"])}};g.prototype.getZoom=function(){return this.viewport?this.viewport.zoom:void 0};g.prototype.zoomOut=function(){for(var a=this.viewport.zoom-1,b=this.a,c=0;c<b.length;c++)var d=b[c].options.min_zoom,a=Math.max("number"==
typeof d?d:0,a);this.setViewport({zoom:a})};g.prototype.zoomIn=function(){for(var a=this.viewport.zoom+1,b=this.a,c=0;c<b.length;c++)var d=b[c].options.max_zoom,a=Math.min("number"==typeof d?d:19,a);this.setViewport({zoom:a})};g.prototype.getOffset=function(){return new m(this.offsetLeft,this.offsetTop)};g.prototype.m=function(a,b){this.j(a,1);(a instanceof A?this.o=this.o||[]:a instanceof v?this.h=this.h||[]:this.s=this.s||[]).push(a);b||this.c();n.b.apply(this,["overlay_added"])};g.prototype.j=
function(a,b){var c;c=a instanceof A?this.o=this.o||[]:a instanceof v?this.h=this.h||[]:this.s=this.s||[];for(var d=0;c&&d<c.length;d++)c[d]===a&&c.splice(d,1);b||this.c();n.b.apply(this,["overlay_removed"])};g.prototype.ia=function(a){this.ha=(new Date).getTime();var b=p(this,g.prototype.M,[{e:a,C:this.O()}]);this.R=0;this.G=w("mousemove",b,window);this.i.style.cursor="move";n.b.apply(this,["drag_start",a])};g.prototype.X=function(a){this.G&&(H(this.G),this.G=void 0,this.R&&n.b.apply(this,["drag_end",
a]));this.i.style.cursor=""};g.prototype.click=g.prototype.H=function(a){var b=/click$/,c=new m(a.clientX,a.clientY);for(el=a.target;el;)c.x+=el.offsetLeft,c.y+=el.offsetTop,el=el.offsetParent;c.x+=this.offsetLeft;c.y+=this.offsetTop;var c=this.a[0].fromPointToLatLng(c,this.getZoom()),d=[this.s,this.o,this.h];a.type.match(b)?100>(new Date).getTime()-this.ha&&a.target===this.f&&n.b.apply(this,["click",c,a]):n.b.apply(this,["mousemove",c,a]);for(var e=0;!a.cancelBubble&&e<d.length;e++)for(var f=d[e],
l=0;f&&!a.cancelBubble&&l<f.length;l++){var h=f[l],k={e:a,latlng:c};h.check_for_mouseover&&h.check_for_mouseover(k)&&(a.type.match(b)?h.click&&h.click(k):h.H&&h.H(a))}};g.prototype.L=function(a,b){this.T=void 0;for(var c=a.pageX+this.offsetLeft,d=a.pageY+this.offsetTop,e=a.target,f=this.a[0].fromLatLngToPoint(this.viewport.center,this.getZoom()),l=this.a[0],h=this.viewport.center,k=this.viewport.zoom;e;)c+=e.offsetLeft,d+=e.offsetTop,e=e.offsetParent;b&&this.viewport.zoom>l.options.min_zoom?(h=l.fromPointToLatLng(new m(f.x-
(c-f.x),f.y-(d-f.y)),k),k--):this.viewport.zoom<l.options.max_zoom&&(h=l.fromPointToLatLng(new m(f.x+(c-f.x)/2,f.y+(d-f.y)/2),k),k++);this.setViewport({center:h,zoom:k});n.b.apply(this,["wheel"==a.type?"mousewheel":"dblclick",a])};g.prototype.ka=function(a){this.w&&H(this.w);this.w=w("touchmove",2==a.touches.length?p(this,g.prototype.da,[{e:a}]):p(this,g.prototype.M,[{e:a,C:this.O()}]),window);n.b.apply(this,["touch_start",a])};g.prototype.N=function(a){this.w&&H(this.w);n.b.apply(this,["touch_end",
a])};g.prototype.da=function(a,b){var c=a.ja=a.ja||(new Date).getTime(),d=Math.sqrt(Math.pow(a.e.touches[0].pageX-a.e.touches[1].pageX,2)+Math.pow(a.e.touches[0].pageY-a.e.touches[1].pageY,2)),e=Math.sqrt(Math.pow(b.touches[0].pageX-b.touches[1].pageX,2)+Math.pow(b.touches[0].pageY-b.touches[1].pageY,2));if(500>=(new Date).getTime()-c&&150<=Math.abs(e-d)){for(var c=(a.e.touches[0].pageX+a.e.touches[1].pageX)/2+this.offsetLeft,f=(a.e.touches[0].pageY+a.e.touches[1].pageY)/2+this.offsetTop,l=this.f,
h=this.a[0],k=h.fromLatLngToPoint(this.viewport.center,this.getZoom());l;)c-=l.offsetLeft,f-=l.offsetTop,l=l.offsetParent;d>e?(d=h.fromPointToLatLng(new m(k.x-(c-k.x),k.y-(f-k.y)),this.getZoom()),this.setViewport({center:d,zoom:Math.max(this.a[0].options.min_zoom,this.viewport.zoom-1)})):(d=h.fromPointToLatLng(new m(k.x+(c-k.x)/2,k.y+(f-k.y)/2),this.getZoom()),this.setViewport({center:d,zoom:Math.min(this.a[0].options.max_zoom,this.viewport.zoom+1)}));this.N()}};g.prototype.aa=function(a){var b=Math.max(-1,
Math.min(1,a.wheelDelta||-a.pa));this.T||(this.T=setTimeout(p(this,g.prototype.L,[a,0>b]),500))};g.prototype.M=function(a,b){var c=a.e.touches?a.e.touches[0]:a.e,d=c.clientX-(b.changedTouches?b.changedTouches[0]:b).clientX,c=c.clientY-(b.changedTouches?b.changedTouches[0]:b).clientY,e=new m(a.C.x+d,a.C.y+c);this.R=d||c;this.setViewport({center:this.a[0].fromPointToLatLng(e,this.getZoom())});n.b.apply(this,["drag",{e:b,anchor:a}]);b.preventDefault&&b.preventDefault();return!1};g.prototype.resize=function(a){var b=
this.ga;b&&clearTimeout(b);var c=this.J,b=this.f,d=c.offsetHeight,c=c.offsetWidth;if(d!=b.height||c!=b.width)b.height=d,b.width=c,this.c();n.b.apply(this,["resize",a]);a=this.fa=this.fa||p(this,g.prototype.resize);this.ga=setTimeout(a,500)};g.prototype.getMapType=function(){return this.a};g.prototype.getCanvas=function(){return this.f};g.prototype.getContext=function(){return this.context};u("Point",m);t.prototype.setOptions=function(a){for(var b in a)this.options[b]=a[b]};t.prototype.fromLatLngToPoint=
function(a,b){var c=a.lng,d="number"==typeof b?b:0,e=Math.sin(a.lat*Math.PI/180),e=Math.max(e,-.9999),e=Math.min(e,.9999);return new m(Math.round(256*Math.pow(2,d-1)+256*Math.pow(2,d)/360*c),Math.round(256*Math.pow(2,d-1)+-256*Math.pow(2,d)/(2*Math.PI)*Math.log((1+e)/(1-e))*.5))};t.prototype.fromPointToLatLng=function(a,b){for(var c="number"==typeof b?b:0,d=Math.PI,e=(a.x-256*Math.pow(2,c-1))/(256*Math.pow(2,c)/360),c=(2*Math.atan(Math.exp((a.y-256*Math.pow(2,c-1))/(-256*Math.pow(2,c)/(2*d))))-d/
2)/(d/180),c=Math.max(c,-90),c=Math.min(c,90);-180>e;)e+=360;for(;180<e;)e-=360;return new q(c,e)};t.prototype.resolveTileUrl=function(a,b,c){return this.options.resolveTileUrl?this.options.resolveTileUrl(a,b,c):"http://"+["a","b"][Math.round(Math.random())]+".tile.openstreetmap.org/"+c+"/"+a+"/"+b+".png"};t.prototype.Y=function(a,b,c,d){var e=this.v=this.v||{};e[c]||(e[c]={});e[c][a]||(e[c][a]={});var f=e[c][a][b]=new Image;f.onload=p(this,function(a,b,c){this.v[c][a][b].V=1;d.c()},[a,b,c]);f.src=
this.resolveTileUrl(a,b,c);e[c][a][b]=f};t.prototype.S=function(a,b,c,d){var e=this.v=this.v||{},f=this.l=Math.pow(2,c),l=a%f,h=b%f,k=this.options,g=this.g=this.g||k.tileWidth||256,m=this.la=this.la||k.tileHeight||256,e=e[c]&&e[c][l%f]?e[c][l%f][h]:void 0,n=a*g-d.offsetLeft,I=b*m-d.offsetTop,p=d.context;p.save();p.globalCompositeOperation="destination-over";0<=b&&b<f&&(!k.no_infinite_scroll||0<=a&&a<f)?e&&e.V?n>-g&&I>-m&&p.drawImage(e,n,I):e||this.Y(l,h,c,d):(p.fillStyle=d.options.background_color||
"rgba(100, 100, 100, 1)",p.fillRect(n,I,g,m));p.restore()};u("MapType",t);t.STREET_MAP=new t;t.TERRAIN_OVERLAY=new t({max_zoom:19,min_zoom:0,resolveTileUrl:function(a,b,c){return"http://c.tiles.wmflabs.org/hillshading/"+c+"/"+a+"/"+b+".png"}});var F=r("span",[document.createTextNode("Map tiles by "),r("a",[document.createTextNode("Stamen Design")],{href:"http://stamen.com"}),document.createTextNode(", under "),r("a",[document.createTextNode("CC BY 3.0")],{href:"http://creativecommons.org/licenses/by/3.0"}),
document.createTextNode(". Data by "),r("a",[document.createTextNode("OpenStreetMap")],{href:"http://openstreetmap.org"}),document.createTextNode("under"),r("a",[document.createTextNode("CC BY SA")],{href:"http://creativecommons.org/licenses/by-sa/3.0"})]);t.TERRAIN=new t({max_zoom:18,min_zoom:4,attribution:F.cloneNode(1),resolveTileUrl:function(a,b,c){return"http://c.tile.stamen.com/terrain/"+c+"/"+a+"/"+b+".jpg"}});t.WATERCOLOR=new t({max_zoom:19,min_zoom:4,attribution:F.cloneNode(1),resolveTileUrl:function(a,
b,c){return"http://c.tile.stamen.com/watercolor/"+c+"/"+a+"/"+b+".jpg"}});t.SATELLITE=new t({max_zoom:18,min_zoom:0,resolveTileUrl:function(a,b,c){return"http://otile"+Math.round(4*Math.random()+.5)+".mqcdn.com/tiles/1.0.0/sat/"+c+"/"+a+"/"+b+".jpg"}});u("RasterMapType",t);E(J,t);J.prototype.S=function(){};y.prototype.u=function(){if(this.options.map){var a=this.options,b=a.map,c=b.a[0],d=b.f,e=this.bounds;if(a=(a=a.position instanceof Array?a.position[0]:a.position?a.position:e.getCenter())?c.fromLatLngToPoint(a,
b.getZoom()):void 0)if(a.x-=Math.round(d.width/(c.l*c.g))*c.l*c.g,e&&e.overlaps(b.viewport.bounds)||a.x-b.offsetLeft<d.width){var f;e&&(f=c.fromLatLngToPoint(e.sw,b.getZoom()),f.x-=Math.round(d.width/(c.l*c.g))*c.l*c.g);for(;a.x-b.offsetLeft<d.width||e&&f.x-b.offsetLeft<d.width;)this.draw(a),a.x+=c.l*c.g,e&&(f.x+=c.l*c.g)}else this.P&&this.P()}};y.prototype.click=function(a){for(var b=this.h,c=0;b&&c<b.length;c++)b[c].open();n.b.apply(this,["click",a]);a.cancelBubble;return!1};y.prototype.setOptions=
function(a){this.options=this.options||{};if(a){"undefined"!=typeof a.map&&this.options.map&&this.options.map!==a.map&&this.options.map.j(this);for(var b in a)"map"==b&&a[b]!==this.options.map&&(this.options.map&&this.options.map.j&&this.options.map.j(this),a.map&&a.map.m&&a.map.m(this)),this.options[b]=a[b];if(a=this.options.map)a.m(this,1),a.c()}};u("Overlay",y);E(A,y);A.prototype.draw=function(a){if(this.options.map){var b=this.options,c=b.map,d=c.context;if("string"==typeof b.icon){var e=this.F&&
this.F.src==b.icon?this.F:void 0;if(e){var f=b.anchor=b.anchor||new m(Math.round(e.width/2),e.height);d.drawImage(e,a.x-f.x-c.offsetLeft,a.y-f.y-c.offsetTop);b.shape||(b.shape=[new m(-f.x,f.y),new m(-f.x,0),new m(f.x,0),new m(f.x,f.y),new m(-f.x,f.y)])}else e=this.F=new Image,e.onload=p(this,A.prototype.u),e.src=b.icon}else if("function"==typeof b.icon)d.save(),b.icon.apply(this,[a]),d.restore();else{var e=Math.round(3),f=new m(a.x-e-c.offsetLeft,a.y-30-c.offsetTop),l=new m(a.x-c.offsetLeft,a.y-c.offsetTop),
h=b.label?d.measureText(b.label).width:0;a=Math.max(32,h+10);c=Math.round(.75*e);d.lineWidth=1;b.label_font&&(d.font=b.label_font||"14px Arial");d.fillStyle=b.color||"rgba(255, 75, 75, 1)";d.strokeStyle=b.flag_stroke_color||"rgba(100, 25, 25, 1)";d.beginPath();d.moveTo(f.x+6,f.y);d.lineTo(f.x+6+a,f.y);d.lineTo(f.x+6+a-c,f.y+22.5);d.lineTo(f.x+6-c,f.y+22.5);d.fill();d.stroke();for(var k=0;6>k;k++){var g=175-50*Math.max(k-e,0);d.beginPath();d.moveTo(f.x+k,f.y);d.lineTo(l.x,l.y);d.strokeStyle="rgba("+
g+", "+g+", "+g+", 1)";d.stroke()}d.beginPath();d.moveTo(f.x,f.y);d.bezierCurveTo(f.x,f.y-2,f.x+6,f.y-2,f.x+6,f.y);d.bezierCurveTo(f.x+6,f.y+2,f.x,f.y+2,f.x,f.y);d.fillStyle="rgba(175, 175, 175, 1)";d.fill();b.label&&(l=Math.round((a-h)/2)-Math.round(.75*c),h=this.U,"undefined"==typeof h&&(k=r("div",[document.createTextNode(b.label)],null,{font:b.label_font||"14px Arial",position:"absolute",visibility:"hidden"}),document.body.appendChild(k),h=this.U=k.offsetHeight,document.body.removeChild(k)),d.fillStyle=
b.label_color||"#000",d.fillText(b.label,f.x+6+l,f.y+22.5-Math.round((22.5-.66*h)/2)));b.shape||(b.shape=[new m(0,0),new m(-e,-30),new m(e+a,-30),new m(e+a-c,7.5),new m(e-c,7.5),new m(0,0)])}}};A.prototype.setOptions=function(a){y.prototype.setOptions.apply(this,[a]);a&&(this.U=void 0)};A.prototype.check_for_mouseover=function(a){for(var b=this.options,c=b.map,d=c.a[0],e=d.fromLatLngToPoint(b.position,c.getZoom()),b=b.shape||[],d=d.fromLatLngToPoint(a.latlng,c.getZoom()),f=0,l=0;l<b.length-1;l++){var h=
new m(e.x+b[l].x,e.y+b[l].y),k=new m(e.x+b[l+1].x,e.y+b[l+1].y);h.y>k.y&&(pt3=k,k=h,h=pt3);if(d.y==h.y||d.y==k.y)d.y+=1E-4;d.y<h.y||d.y>k.y||d.x>Math.max(h.x,k.x)||(d.x<Math.min(h.x,k.x)?f++:(h.x!=d.x?(d.y-h.y)/(d.x-h.x):Infinity)>=(h.x!=k.x?(k.y-h.y)/(k.x-k.x):Infinity)&&f++)}if(f%2)return c.i.style.cursor="pointer",a.e.cancelBubble=1,a.e.stopPropagation&&a.e.stopPropagation(),1;c.i.style.cursor=""};u("Marker",A);E(x,y);x.prototype.draw=function(a){if(this.options.position&&this.options.position.length&&
this.options.map){var b=this.options,c=b.map,d=c.context,e=c.a[0];e.fromLatLngToPoint(this.options.position[0],c.getZoom());d.save();d.lineWidth=b.stroke_width||4;d.strokeStyle=b.stroke_color||"rgb(0, 200, 0)";d.fillStyle=b.fill_color||"rgb(150, 200, 150)";d.lineJoin=b.corner_style||"miter";b.position[0]instanceof q&&(b.position=[b.position]);for(var f=0;f<b.position.length;f++){a=b.position[f];for(var l=0;l<a.length;l++){var h=e.fromLatLngToPoint(a[l],c.getZoom()),k=h.x-c.offsetLeft,h=h.y-c.offsetTop;
0==l?(d.beginPath(),d.moveTo(k,h)):d.lineTo(k,h)}this.qa()&&d.closePath();this instanceof D&&this.isClosed()&&(0==f?(d.globalCompositeOperation="source-over",d.globalAlpha=b.fill_opacity||1):(d.globalCompositeOperation="destination-out",d.globalAlpha=1),d.fill());d.globalCompositeOperation="source-over";d.globalAlpha=b.stroke_opacity||1;d.stroke()}d.restore()}};x.prototype.extend=function(){this.options.position||(this.options.position=[]);var a=this.options.position[0]=this.options.position[0]||
[],b=this.bounds,c=this.options.map;a instanceof q&&(a=this.options.position,this.options.position=[a]);for(var d=0;d<arguments.length;d++){var e=arguments[d];this instanceof D?0==a.length?(a.push(e),a.push(new q(e.lat,e.lng))):a.splice(a.length-1,0,e):a.push(e);b.extend(e)}c&&c.c()};x.prototype.getLength=function(){for(var a=this.options.position,b=0,c=1;c<a.length;c++)b+=a[c-1].distanceFrom(a[c]);return b};x.prototype.setOptions=function(a){y.prototype.setOptions.apply(this,[a]);this.options.position&&
this.options.map&&this.options.map.c()};x.prototype.isClosed=function(){var a=this.options.position;if(a.length&&a[0]instanceof Array&&a[0][0].equals(a[0][a[0].length-1]))return 1};x.prototype.check_for_mouseover=function(a){return this.contains(a.latlng)};x.prototype.contains=function(a){var b=this.options,c=b.map,d=c.a[0],e=this.bounds;if(e.sw&&e.ne){var f=a instanceof q?d.fromLatLngToPoint(a,c.getZoom()):a,l=(b.stroke_width||4)/2;a=new q(a instanceof q?a.lat:d.fromPointToLatLng(a,c.getZoom()).lat,
e.sw.lng-1);e=0;this.options.position||(this.options.position=[[]]);for(var h=0;h<b.position.length;h++){for(var k=b.position[h],g=0;g<k.length-1;g++){var m=d.fromLatLngToPoint(k[g],c.getZoom()),p=d.fromLatLngToPoint(k[g+1],c.getZoom()),n=(p.y-m.y)/(p.x-m.x),r=m.y-n*m.x,t=n*f.x+r,n=(f.y-r)/n;if(f.x>=Math.min(m.x,p.x)-l&&f.x<=Math.max(m.x,p.x)+l&&Math.abs(f.y-t)<=l)return 1;this instanceof D&&this.isClosed()&&n>d.fromLatLngToPoint(a,c.getZoom()).x&&n<=f.x&&f.y>=Math.min(m.y,p.y)&&f.y<=Math.max(m.y,
p.y)&&e++}if(this instanceof D&&e%2)return 1}}};u("Line",x);E(D,x);D.prototype.getArea=function(a){var b=this.options,c=b.map,b=b.position,d=0,e=0;!a&&c&&c.options.map_type&&c.getMapType()[0]&&(a=c.getMapType()[0].options.earth_radius);for(c=0;c<b.length;c++){for(var f=b[c],l=f[0],h=1;h<f.length-1;h++){for(var k=0,g=0,k=0,m=[l,f[h],f[h+1],l],p=[],g=[],n=0;3>n;n++){var q=m[n].latRadians(),r=m[n+1].latRadians(),t=m[n].lngRadians(),u=m[n+1].lngRadians();p[n]=2*Math.asin(Math.sqrt(Math.pow(Math.sin((q-
r)/2),2)+Math.cos(q)*Math.cos(r)*Math.pow(Math.sin((t-u)/2),2)));k+=p[n];g[n]=[Math.cos(q)*Math.cos(t),Math.cos(q)*Math.sin(t),Math.sin(q)]}k/=2;m=Math.tan(k/2);for(n=0;3>n;n++)m*=Math.tan((k-p[n])/2);k=4*Math.atan(Math.sqrt(Math.abs(m)));g=0<g[0][0]*g[1][1]*g[2][2]+g[1][0]*g[2][1]*g[0][2]+g[2][0]*g[0][1]*g[1][2]-g[0][0]*g[1][2]-g[1][0]*g[0][1]*g[2][2]-g[2][0]*g[1][1]*g[0][2]?1:-1;d+=k*g}e=c?e-Math.abs(d*Math.pow(a,2)):e+Math.abs(d*Math.pow(a,2))}return e};u("Polygon",D);E(v,y);v.prototype.draw=function(a){var b=
this.container.style,c=this.options.map;b.left=a.x-c.offsetLeft+"px";b.top=a.y-this.height-c.offsetTop+"px"};v.prototype.setOptions=function(a){var b=this.options;"undefined"==typeof b&&(b=this.options={},Object.defineProperty(b,"map",{get:function(){return this.overlay&&this.overlay.options.map?this.overlay.options.map:this.$},set:function(a){this.overlay&&(this.overlay.options.map=a);this.$=a}}),Object.defineProperty(b,"position",{get:function(){return this.overlay&&this.overlay.options.position?
this.overlay.options.position:this.ea},set:function(a){this.overlay&&(this.overlay.options.position=a);this.ea=a}}));if(a){"undefined"!=typeof a.map&&b.map&&a.map!==b.map&&b.map.j(this);"undefined"!=typeof a.overlay&&a.overlay!==b.overlay&&(b.overlay&&n.removeEvent(this.ca),a.overlay&&(this.ca=n.addEvent(a.overlay,"click",p(this,v.prototype.open))));for(var c in a)b[c]=a[c];if(a=this.options.map)a.m(this,1),this.u()}};v.prototype.open=v.prototype.show=function(a){this.setOptions(a);a=this.container;
var b=this.options,c=this.options.map;c&&(a.style.top=a.style.left="0px",a.style.visibility="hidden",c.i.appendChild(a),b.content&&(this.K.appendChild(b.content),a.style.width=this.K.offsetWidth+"px"),this.height=a.offsetHeight,this.width=a.offsetWidth,c.m(this,1),this.u(),a.style.visibility="visible")};v.prototype.close=v.prototype.P=function(){var a=this.container;a.parentNode&&a.parentNode.removeChild(a);this.options.map&&this.options.map.j(this)};v.prototype.isOpen=function(){return this.container.parentNode?
1:void 0};v.prototype.check_for_mouseover=function(){};u("InfoWindow",v);z.prototype.extend=function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];this.sw=this.sw?new q(Math.min(this.sw.lat,b.lat),Math.min(this.sw.lng,b.lng)):b;this.ne=this.ne?new q(Math.max(this.ne.lat,b.lat),Math.max(this.ne.lng,b.lng)):b}};z.prototype.contains=function(a){var b=this.sw,c=this.ne;return b&&c&&a.lat>=b.lat&&a.lat<=c.lat&&a.lng>=b.lng&&a.lng<=c.lng};z.prototype.overlaps=function(a){if(a.ne.lat>=this.sw.lat&&
a.sw.lat<=this.ne.lat&&a.ne.lng>=this.sw.lng&&a.sw.lng<=this.ne.lng)return 1};z.prototype.getCenter=function(){var a=this.sw,b=this.ne;return new q((a.lat+b.lat)/2,(a.lng+b.lng)/2)};u("LatLngBounds",z);q.prototype.lat=function(){return this.lat};q.prototype.lng=function(){return this.lng};q.prototype.latRadians=function(){return this.lat*G};q.prototype.lngRadians=function(){return this.lng*G};q.prototype.distanceFrom=function(a,b){var c=this.latRadians();this.lngRadians();var d=this.latRadians();
this.lngRadians();return Math.acos(Math.sin(c)*Math.sin(d)+Math.cos(c)*Math.cos(d)*Math.cos((a.lng-this.lng)*G))*(b||6378137)};q.prototype.equals=function(a){return a.lat==this.lat&&a.lng==this.lng};u("LatLng",q);C.prototype.na=function(a){a.stopPropagation&&a.stopPropagation();a.stopImmediatePropagation&&a.stopImmediatePropagation();a=this.options;a.map&&a.map.zoomIn()};C.prototype.oa=function(a){a.stopPropagation&&a.stopPropagation();a.stopImmediatePropagation&&a.stopImmediatePropagation();a=this.options;
a.map&&a.map.zoomOut()};C.prototype.I=function(){var a=this.options.map,b=a.getMapType()[0].options,c=/-(in)?active\b/;b.max_zoom<=a.getZoom()?this.A.className=this.A.className.replace(c,"-inactive"):this.A.className=this.A.className.replace(c,"-active");b.min_zoom>=a.getZoom()?this.B.className=this.B.className.replace(c,"-inactive"):this.B.className=this.B.className.replace(c,"-active")};B.prototype.geocode=function(a,b){var c=0;a instanceof q?(a={lat:a.lat,lon:a.lng},c=1):"object"!=typeof a&&(a=
{q:a});a.format="json";a.json_callback="window._osm.Geocoder.geocoders["+this.index+"].callback";var c="http://nominatim.openstreetmap.org/"+(c?"reverse":"search")+"?",d;for(d in a)c+="&"+encodeURIComponent(d)+"="+encodeURIComponent(a[d]);d=r("script",null,{type:"text/javascript",src:c,onload:function(){this.parentNode.removeChild(this)}});document.getElementsByTagName("head")[0].appendChild(d);this.D=b;this.timeout=setTimeout(p(this,B.prototype.callback,[{error:B.status.TIMED_OUT}]),2500)};B.prototype.callback=
function(a){if(this.timeout){clearTimeout(this.timeout);this.timeout=void 0;var b={};a instanceof Array&&a[0]?(a=a[0],b={geometry:{latlng:new q(parseFloat(a.lat),parseFloat(a.lon)),bounds:new z(new q(parseFloat(a.boundingbox[0]),parseFloat(a.boundingbox[2])),new q(parseFloat(a.boundingbox[1]),parseFloat(a.boundingbox[3])))},attribution:a.licence,type:a.type}):(b=a,b.licence&&(b.attribution=b.licence,delete b.licence));this.D&&this.D(b);this.D=void 0}};B.status={TIMED_OUT:408};B.geocoders=[];u("Geocoder",
B);var n={addEvent:function(a,b,c){a.listeners[b]&&a.listeners[b].push(c);return{ba:a,listener:b,method:c}},removeEvent:function(a){for(var b=a.ba.listeners[a.listener],c=0;b&&c<b.length;c++)b[c]===a.method&&b.splice(c,1)},trigger:function(a,b,c){n.b.apply(a,[b,c])},b:function(){for(var a=arguments[0],b=Array.prototype.slice.call(arguments,1),c=0;this.listeners[a]&&c<this.listeners[a].length;c++)this.listeners[a][c].apply(this,b)}},w=n.addDOMEvent=function(a,b,c,d){c=c?c:window;c.addEventListener(a,
b,d);return{method:b,listener:a,target:c,ma:d}},H=n.removeDOMEvent=function(a){(a.target||window).removeEventListener(a.listener,a.method,a.ma)};u("events",n);var F={getAngle:function(a,b,c){for(a=K(b,a)-K(b,c);0>a;)a+=360;return a}},K=F.getBearing=function(a,b){for(bearing=-Math.atan2(Math.sin(a.lngRadians()-b.lngRadians())*Math.cos(b.latRadians()),Math.cos(a.latRadians())*Math.sin(b.latRadians())-Math.sin(a.latRadians())*Math.cos(a.lngRadians()-b.lngRadians()));0>bearing;)bearing+=2*Math.PI;return bearing*
M};u("geometry",F);u("extendClass",E);u("createMethodClosure",p)})();